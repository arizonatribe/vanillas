

<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: fuzzy.js</title>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./build/entry.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
    <link type="text/css" rel="stylesheet" href="styles/iframe.css">
    
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                    
                        <h1 class="navbar-item">Vanillas</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="https://github.com/arizonatribe/vanillas" target="_blank">
                                Github
                            </a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"><h3>Global</h3><ul><li><a href="global.html#any">any</a></li><li><a href="global.html#append">append</a></li><li><a href="global.html#assign">assign</a></li><li><a href="global.html#clone">clone</a></li><li><a href="global.html#combine">combine</a></li><li><a href="global.html#compose">compose</a></li><li><a href="global.html#concat">concat</a></li><li><a href="global.html#cond">cond</a></li><li><a href="global.html#contains">contains</a></li><li><a href="global.html#converge">converge</a></li><li><a href="global.html#convergeZip">convergeZip</a></li><li><a href="global.html#curry">curry</a></li><li><a href="global.html#curryN">curryN</a></li><li><a href="global.html#difference">difference</a></li><li><a href="global.html#each">each</a></li><li><a href="global.html#eitherOr">eitherOr</a></li><li><a href="global.html#entries">entries</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#filterObject">filterObject</a></li><li><a href="global.html#filterString">filterString</a></li><li><a href="global.html#find">find</a></li><li><a href="global.html#findIndex">findIndex</a></li><li><a href="global.html#first">first</a></li><li><a href="global.html#flatten">flatten</a></li><li><a href="global.html#flipKeyValues">flipKeyValues</a></li><li><a href="global.html#forIn">forIn</a></li><li><a href="global.html#fuzzy">fuzzy</a></li><li><a href="global.html#getType">getType</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#hasNestedProp">hasNestedProp</a></li><li><a href="global.html#identity">identity</a></li><li><a href="global.html#intersection">intersection</a></li><li><a href="global.html#is">is</a></li><li><a href="global.html#isArrayish">isArrayish</a></li><li><a href="global.html#isBlankString">isBlankString</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#isEqual">isEqual</a></li><li><a href="global.html#isInteger">isInteger</a></li><li><a href="global.html#isMap">isMap</a></li><li><a href="global.html#isNil">isNil</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isObjectish">isObjectish</a></li><li><a href="global.html#isPrimitive">isPrimitive</a></li><li><a href="global.html#isPromise">isPromise</a></li><li><a href="global.html#isSameType">isSameType</a></li><li><a href="global.html#isSet">isSet</a></li><li><a href="global.html#isStrictEqual">isStrictEqual</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#last">last</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#mapObject">mapObject</a></li><li><a href="global.html#mapObjectRecursive">mapObjectRecursive</a></li><li><a href="global.html#mapSpec">mapSpec</a></li><li><a href="global.html#mapString">mapString</a></li><li><a href="global.html#memoize">memoize</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#omit">omit</a></li><li><a href="global.html#pick">pick</a></li><li><a href="global.html#pickNull">pickNull</a></li><li><a href="global.html#pickUndefined">pickUndefined</a></li><li><a href="global.html#pipe">pipe</a></li><li><a href="global.html#prepend">prepend</a></li><li><a href="global.html#promiseAll">promiseAll</a></li><li><a href="global.html#promiseChain">promiseChain</a></li><li><a href="global.html#promiseCompose">promiseCompose</a></li><li><a href="global.html#propAt">propAt</a></li><li><a href="global.html#propEquals">propEquals</a></li><li><a href="global.html#propIs">propIs</a></li><li><a href="global.html#propOr">propOr</a></li><li><a href="global.html#propSet">propSet</a></li><li><a href="global.html#reduce">reduce</a></li><li><a href="global.html#renameKeys">renameKeys</a></li><li><a href="global.html#shim">shim</a></li><li><a href="global.html#size">size</a></li><li><a href="global.html#toCamelCase">toCamelCase</a></li><li><a href="global.html#toInteger">toInteger</a></li><li><a href="global.html#toKebabCase">toKebabCase</a></li><li><a href="global.html#toLowerCase">toLowerCase</a></li><li><a href="global.html#toSnakeCase">toSnakeCase</a></li><li><a href="global.html#toTitleCase">toTitleCase</a></li><li><a href="global.html#toUpperCase">toUpperCase</a></li><li><a href="global.html#toUriEncoded">toUriEncoded</a></li><li><a href="global.html#uniq">uniq</a></li><li><a href="global.html#uniqBy">uniqBy</a></li><li><a href="global.html#unthunk">unthunk</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#values">values</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Source</p>
                        <h1>fuzzy.js</h1>
                    </header>

                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Performs a fuzzy search on a list of strings or objects.
 * If a list of objects, provided the prop extraction function so the search can find the correct field(s)
 * This is heavily inspired by (most of) the algorithm used by [Matt York's](https://github.com/myork/fuzzy) fuzzy search function,
 * however several features were not carried over and his implementation of that alrgorithm has been significantly changed to achieve a 25% speed improvement.
 * Please see his original work - called [fuzzy](https://www.npmjs.com/package/fuzzy) MIT - if you need some of his additional options.
 *
 * @function
 * @param {Function} propFn A function which will extract all the fields which you wish to fuzzy search on. Omit if the list is a list of strings
 * @param {string} needle The search value itself
 * @param {boolean} [caseSensitive=false] Whether or not to perform a case-sensitive search
 * @param {Array&lt;String>|Array&lt;object>} arr An array of string values or objects which have string values to be searched on
 * @returns {Array&lt;String>|Array&lt;object>} The filtered list of search results
 */
function fuzzy(propFn, needle, caseSensitive, arr) {
  if (arr == null || !Array.isArray(arr) || arr.length === 0) return []
  if (typeof needle !== "string" || !needle.trim().length) return arr

  const scores = []
  const len = arr.length
  const needleLen = needle.length
  let idx = len

  const noodle = caseSensitive ? needle : needle.toLowerCase()
  const extractFn = typeof propFn !== "function" &amp;&amp; caseSensitive
    ? v => v
    : typeof propFn !== "function"
      ? v => v.toLowerCase()
      : caseSensitive
        ? propFn
        : v => propFn(v).toLowerCase()

  while (--idx) {
    let score = 0
    const val = extractFn(arr[idx])
    const valLen = val.length
    if (noodle === val) {
      scores.push([Infinity, idx])
    } else if (valLen !== 0) {
      let valIdx = 0
      let matchedInNeedleIdx = 0
      let numOfCharsMatchedAtOnce = 0
      while (valIdx &lt; valLen) {
        if (noodle[matchedInNeedleIdx] === val[valIdx]) {
          matchedInNeedleIdx++
          numOfCharsMatchedAtOnce++
        } else {
          numOfCharsMatchedAtOnce = 0
        }
        score += numOfCharsMatchedAtOnce
        valIdx++
      }
      if (matchedInNeedleIdx === needleLen) {
        scores.push([score, idx])
      }
    }
  }

  return scores.sort((a, b) => b[0] - a[0] || a[1] - b[1]).map(([_, index]) => arr[index])
}

export default fuzzy
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>


<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue Feb 09 2021 18:39:35 GMT+0000 (Coordinated Universal Time)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
        </p>
    </div>
</footer>


<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
